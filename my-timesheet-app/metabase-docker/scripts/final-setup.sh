#!/bin/bash

# Script final para configurar la conexiÃ³n a Supabase
# Uso: ./scripts/final-setup.sh

echo "ğŸ¯ CONFIGURACIÃ“N FINAL DE METABASE CON SUPABASE"
echo "================================================"
echo ""
echo "âœ… Metabase estÃ¡ funcionando correctamente"
echo "âœ… Conectividad a Supabase resuelta (IPv4)"
echo "âœ… ContraseÃ±a de Supabase obtenida"
echo ""
echo "ğŸ“‹ PASOS PARA COMPLETAR LA CONFIGURACIÃ“N:"
echo ""
echo "1. ğŸŒ ACCEDE A METABASE:"
echo "   URL: http://192.168.88.68:3000"
echo ""
echo "2. ğŸ‘¤ INICIA SESIÃ“N:"
echo "   Usa las credenciales que configuraste anteriormente"
echo ""
echo "3. ğŸ—„ï¸ CONFIGURA LA BASE DE DATOS:"
echo "   - Ve a Settings > Admin > Databases"
echo "   - Haz clic en 'Add database'"
echo "   - Selecciona 'PostgreSQL'"
echo ""
echo "4. ğŸ“ DATOS DE CONEXIÃ“N A SUPABASE:"
echo "   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "   â”‚ Name: Supabase Timesheet                                â”‚"
echo "   â”‚ Host: db.qfpswxjunoepznrpsltt.supabase.co              â”‚"
echo "   â”‚ Port: 5432                                             â”‚"
echo "   â”‚ Database name: postgres                                â”‚"
echo "   â”‚ Username: postgres                                     â”‚"
echo "   â”‚ Password: e3u2zDnt4mGMJFWA                            â”‚"
echo "   â”‚ SSL Mode: require                                      â”‚"
echo "   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "5. âœ… VERIFICAR CONEXIÃ“N:"
echo "   - Haz clic en 'Test connection'"
echo "   - DeberÃ­a mostrar 'Successfully connected'"
echo "   - Haz clic en 'Save'"
echo ""
echo "ğŸ“Š TABLAS DISPONIBLES UNA VEZ CONECTADO:"
echo "   â€¢ job - Proyectos"
echo "   â€¢ job_task - Tareas de proyectos"
echo "   â€¢ job_team - Equipos asignados a proyectos"
echo "   â€¢ resource - Recursos/Empleados"
echo "   â€¢ resource_cost - Costos de recursos"
echo "   â€¢ calendar_period_days - DÃ­as de calendario"
echo "   â€¢ timesheet - LÃ­neas de timesheet"
echo "   â€¢ resource_timesheet_header - Cabeceras de timesheet"
echo ""
echo "ğŸ‰ Â¡UNA VEZ CONFIGURADO PODRÃS:"
echo "   â€¢ Crear dashboards automÃ¡ticos"
echo "   â€¢ Hacer consultas SQL"
echo "   â€¢ Visualizar datos de tu aplicaciÃ³n timesheet"
echo "   â€¢ Crear alertas y notificaciones"
echo ""
echo "ğŸ”§ COMANDOS DE GESTIÃ“N:"
echo "   â€¢ Ver estado: docker compose ps"
echo "   â€¢ Ver logs: docker compose logs -f metabase"
echo "   â€¢ Parar: ./scripts/stop.sh"
echo "   â€¢ Iniciar: ./scripts/start.sh"
echo ""
echo "ğŸ“ Si tienes problemas, revisa los logs con:"
echo "   ssh root@192.168.88.68 'cd /opt/metabase-docker && docker compose logs metabase'"








