#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🔎 Ejecutando validaciones antes de push..."

npm run lint || { echo "💥 Lint falló"; exit 1; }
npm run test --silent || { echo "💥 Tests fallaron"; exit 1; }
bash scripts/smoke-approval.sh || { echo "💥 Smoke Aprobación falló"; exit 1; }
bash scripts/smoke-edit.sh || { echo "💥 Smoke Edición falló"; exit 1; }
bash scripts/smoke-dashboard.sh || { echo "💥 Falta BackToDashboard"; exit 1; }
bash scripts/smoke-styles.sh || { echo "💥 Títulos no usan clases comunes"; exit 1; }
bash scripts/smoke-rejected-edit.sh || { echo "💥 Falta manejo de líneas Rechazadas en Edición"; exit 1; }
bash scripts/smoke-modals.sh || { echo "💥 Se detectaron alert/confirm/prompt en UI"; exit 1; }

echo "✅ Pre-push OK"

